<Window x:Class="IFC_Parameter_Automation.AddParameters"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:local="clr-namespace:IFC_Parameter_Automation"
        mc:Ignorable="d"
        Title="Add Parameters"
        Background="LightGray"
        WindowStartupLocation="CenterScreen"
        SizeToContent="WidthAndHeight"
        MinWidth="300"
        MaxWidth="400"
        ResizeMode="NoResize">

    <Border Background="#FFEDEDED"
            Margin="10"
            BorderBrush="#FFD0D0D0"
            BorderThickness="1"
            CornerRadius="10">

        <StackPanel>

            <!-- Pick Object Button -->
            <Grid Margin="10">
                <Button x:Name="Picking_Object"
                        Content="Pick Object"
                        Width="120"
                        Height="30"
                        Click="Pick_Object"
                        ToolTip="Select a Door or a Window"
                        Cursor="Hand"
                        HorizontalAlignment="Left"/>
            </Grid>

            <!-- Parameters List -->
            <ListView ItemsSource="{Binding Properties}"
                      Margin="10,5,10,0"
                      MaxHeight="250"
                      ScrollViewer.VerticalScrollBarVisibility="Auto">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="5">
                            <CheckBox IsChecked="{Binding IsSelected}" Margin="0,0,10,0"/>
                            <TextBlock Text="{Binding Code}" FontWeight="Bold" Width="200"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>

                <!-- Hide the entire ListView if no data -->
                <ListView.Style>
                    <Style TargetType="ListView">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Properties.Count}" Value="0">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </ListView.Style>
            </ListView>

            <!-- No Data Message -->
            <TextBlock Text="No parameters available."
                       Foreground="Gray"
                       FontStyle="Italic"
                       HorizontalAlignment="Center"
                       Margin="5,0,5,10">
                <TextBlock.Style>
                    <Style TargetType="TextBlock">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Properties.Count}" Value="0">
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>

            <!-- Cancel Button -->
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Button x:Name="Confirm"
                        Content="Confirm"
                        Width="90"
                        Height="30"
                        Grid.Column="0"
                        Click="Confirm_Click"/>
                <Button x:Name="Cancel"
                        Content="Cancel"
                        Width="90"
                        Height="30"
                        Grid.Column="1"
                        Click="Cancel_Click"/>
            </Grid>

        </StackPanel>
    </Border>
</Window>
